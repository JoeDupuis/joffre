<div class="dashboard">
  <h1>Welcome to Joffre</h1>
  <p>You are logged in as <%= Current.session.user.email_address %></p>
  
  <div class="actions">
    <%= link_to "New Game", new_game_path, class: "button" %>
    <%= link_to "Sign out", session_path, data: { turbo_method: :delete } %>
  </div>

  <% if @games.any? %>
    <div class="my-games">
      <h2>My Games</h2>
      <ul class="games-list">
        <% @games.each do |game| %>
          <li class="game-item">
            <%= link_to game_path(game) do %>
              <strong><%= game.name %></strong>
              <span class="game-code">(<%= game.game_code %>)</span>
              <span class="player-count"><%= game.players.count %> players</span>
              <% if game.owner == Current.user %>
                <span class="owner-badge">Owner</span>
              <% end %>
            <% end %>
          </li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="join-game">
    <h2>Join a Game</h2>
    <%= form_with url: join_games_path, local: true do |form| %>
      <div>
        <%= form.label :game_code, "Game Code" %>
        <%= form.text_field :game_code, required: true, placeholder: "Enter 6-digit code", maxlength: 6 %>
      </div>
      
      <div>
        <%= form.label :password, "Password (if required)" %>
        <%= form.password_field :password, placeholder: "Leave blank if no password" %>
      </div>
      
      <div>
        <%= form.submit "Join Game" %>
      </div>
    <% end %>
  </div>
</div>